# 集合型 (Set)

集合型 (`set`) は、重複しないデータを扱うためのデータ構造で、数学的な集合演算を効率的に行えます。この章では、集合型の基本的な使い方から応用例までを解説します。

---

## 1. 集合型の基本

### 1.1 集合型の作成

#### 波括弧 `{}` を使用
集合型は、波括弧 `{}` を使って作成します。ただし、空の集合を作成する場合は `set()` を使用します。波括弧を使うと辞書型と混同される場合があるので注意してください。

```python
# 集合型
set_data = {1, 2, 3, 4, 5}

# 辞書型
dict_data = {'key': 'value'}
```

#### 空の集合を作成

```python
empty_set = set()  # 空の集合
print(type(empty_set))  # 出力: <class 'set'>
```

---

## 2. 重複の排除

集合型の最大の特徴の1つは、重複する要素が自動的に排除されることです。

```python
numbers = {1, 2, 2, 3, 4, 4, 5}
print(numbers)
# 出力: {1, 2, 3, 4, 5}
```

リストやタプルから集合型に変換することで、簡単に重複を排除できます。

```python
list_data = [1, 2, 2, 3, 4, 4, 5, 6]
unique_set = set(list_data)
print(unique_set)
# 出力: {1, 2, 3, 4, 5, 6}
```

---

## 3. 集合演算

集合型では、以下のような数学的な演算が簡単に行えます。

### 3.1 差集合 (`-`)
集合 `a` から集合 `b` を引いた差集合を求めます。

```python
a = {1, 2, 3, 4, 5}
b = {3, 4, 6}
print(a - b)
# 出力: {1, 2, 5}
```

### 3.2 共通部分 (`&`)
集合 `a` と `b` の共通部分を求めます。

```python
print(a & b)
# 出力: {3, 4}
```

### 3.3 和集合 (`|`)
集合 `a` と `b` の要素をすべて含む和集合を求めます。

```python
print(a | b)
# 出力: {1, 2, 3, 4, 5, 6}
```

### 3.4 対称差集合 (`^`)
集合 `a` または `b` のどちらか一方にのみ含まれる要素を求めます。

```python
print(a ^ b)
# 出力: {1, 2, 5, 6}
```

### 3.5 足し算はサポートされない
集合型では、リストやタプルのような足し算（`+`）はサポートされません。

```python
# 以下のコードはエラーになります。
print(a + b)
# Traceback (most recent call last):
# TypeError: unsupported operand type(s) for +: 'set' and 'set'
```

---

## 4. 応用例

### 4.1 ユニークな値の抽出
リストから重複を排除してユニークな値を抽出します。

```python
names = ['Alice', 'Bob', 'Alice', 'Eve']
unique_names = set(names)
print(unique_names)
# 出力: {'Alice', 'Bob', 'Eve'}
```

### 4.2 集合を使ったフィルタリング
リストの要素を別の基準に基づいてフィルタリングします。

```python
all_items = ['apple', 'banana', 'cherry', 'date']
excluded_items = {'banana', 'date'}
filtered_items = set(all_items) - excluded_items
print(filtered_items)
# 出力: {'apple', 'cherry'}
```

---

## 5. 注意点

### 5.1 ミュータブルとイミュータブル
集合型の要素には変更可能なオブジェクト（ミュータブル）を含めることはできません。例えば、リストや辞書はミュータブルなので集合に含めるとエラーになります。一方で、タプルのような変更不可能なオブジェクト（イミュータブル）は使用可能です。

#### ミュータブルとは？
- **定義**: 値を変更できるオブジェクト。
- **例**: リスト、辞書、集合そのもの。

```python
# 以下のコードはエラーになります
invalid_set = {[1, 2, 3], 4}
# Traceback (most recent call last):
# TypeError: unhashable type: 'list'
```

#### イミュータブルとは？
- **定義**: 値を変更できないオブジェクト。
- **例**: タプル、文字列、数値。

```python
# タプルなら使用可能
valid_set = {(1, 2, 3), 4}
print(valid_set)
# 出力: {(1, 2, 3), 4}
```

---

## 6. まとめ
- 集合型は重複を排除する際に非常に便利です。
- 数学的な集合演算を簡潔に実行できます。
- 応用例を通じて、データのフィルタリングやユニークな値の抽出など、実務での活用方法を学びましょう。
- 注意点として、ミュータブルな要素は含められないことを理解しておきましょう。


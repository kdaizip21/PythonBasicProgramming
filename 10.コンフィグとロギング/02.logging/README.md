$lsx()

# Logging
- 文字列を表示するだけなら、`logging`でなくとも`print`でも可能
- 開発・運用をスムーズにすすめるためには`logging`を使うのが良い
- javaにおける`log4j`のpython版


## 結論

- print
    - 標準出力/標準エラー (stdout/stderr) のみの出力で、出力内容も固定されているので、デバッグ用ではない
- logging
    - 必要なときに必要な量の情報をいろんな出力 (例: socket) ができる。


## Loggingでできること
### 重要性に応じた出力
- [公式]より
    ```
    logging は、あるソフトウェアが実行されているときに起こったイベントを追跡するための手段です。ソフトウェアの開発者は、特定のイベントが発生したことを示す logging の呼び出しをコードに加えます。イベントは、メッセージで記述され、これに変数データ (すなわち、イベントが起こる度に異なるかもしれないデータ) を加えることもできます。イベントには、開発者がそのイベントに定めた重要性も含まれます。重要性は、レベル (level) や 重大度 (severity) とも呼ばれます。
    ```
    
重要性とは下記の通り
1. DEBUG
    - 開発中に、原因を突き止めやすくするために、詳細な情報を出力したいときに利用します。
2. INFO
    - アプリ運用中には、イベントの発生情報 (または、想定通りの動作情報) を出すときに利用します。
    - 例: 「リクエスト来たよ。」「ソケット開けたよ。」など
3. WARNING
    - 今は問題ではないけど、今後の運用で注意が必要な情報出力として利用します。
    - 例: 「空き容量が残り 20% ！」
4. ERROR
    - 機能実行でエラーが発生した際に利用ります。
    - 例: 「〇〇関数の実行に失敗」「〇〇モジュールインポートに失敗」
5. CRITICAL
    - 大問題が発生し、アプリ動作がおかしいときに利用します。
    - 例: 「アプリを強制終了します。」


## Logging を使うべき理由
### タイムスタンプが出力できる

ログ解析をするに、タイムスタンプはとても重要

- 「このエラーは、データベース接続前にでたのか、接続後に出たのか？」
- 「エラー発生は、ディスク容量が一定値を超える前なのか後だったのか？」
- 「このリクエストはいつ来たんだ？」


### どこで起きたエラーかがわかる
「エラーが出た！」だけでは、どこを対処すべきかが不明だが、logging を使うことで

- ファイル名: %(filename)s
- モジュール名: %(module)s
- 関数名: %(funcName)s
- 行番号: %(lineno)d
- プロセスID: %(process)d
- スレッドID: %(thread)d

`Formatter` というものに設定することで、細かく情報の出力コントロールができる


### ログレベルに応じて、出力先をコントロールできる
`Handler` というものを使って、出力方法を設定できます。

- StreamHandler: 標準エラー出力、標準出力でコンソールに出力
- FileHandler: ファイルに出力
- HTTPHandler: HTTP 経由で出力

これらの handler を使って、どこに情報を出力するかを設定できます。
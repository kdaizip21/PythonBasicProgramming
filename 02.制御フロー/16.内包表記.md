# 内包表記 ～初心者向け解説～

Pythonの内包表記（Comprehensions）は、リストや辞書などのコレクション型データを簡潔かつ効率的に生成するための便利な構文です。このドキュメントでは、内包表記の基本から実用的な例までをわかりやすく解説します。

---

## 内包表記とは？

内包表記は、**「簡潔にデータを生成するための構文」**です。

### 特徴
1. **簡潔**：複数行のループや条件分岐を1行で記述可能。
2. **効率的**：高速にデータを生成。
3. **可読性向上**：適切に使えばコードがシンプルに。

#### 基本構文（リスト内包表記）
```python
[式 for 要素 in イテラブル if 条件]
```
- `式`：生成される要素の計算式。
- `イテラブル`：リストやタプルなど、ループ対象のデータ。
- `条件`（オプション）：要素をフィルタリングする条件。

---

## リスト内包表記の例

### 例1：リストの生成

通常のループでリストを作成する場合：
```python
t = (1, 2, 3, 4, 5)

# 通常の方法
r = []
for i in t:
    r.append(i)

print(r)  # 出力: [1, 2, 3, 4, 5]
```

リスト内包表記を使うと：
```python
t = (1, 2, 3, 4, 5)

# 内包表記
r = [i for i in t]
print(r)  # 出力: [1, 2, 3, 4, 5]
```

### 例2：条件付きリスト内包表記

リストから偶数だけを抽出する場合：

```python
t = (1, 2, 3, 4, 5)

# 通常の方法
r = []
for i in t:
    if i % 2 == 0:
        r.append(i)

print(r)  # 出力: [2, 4]
```

内包表記を使うと：
```python
t = (1, 2, 3, 4, 5)

# 内包表記
r = [i for i in t if i % 2 == 0]
print(r)  # 出力: [2, 4]
```

---

## 辞書内包表記

### 例1：リストから辞書を生成

以下のリストから辞書を生成する場合：
```python
keys = ['mon', 'tue', 'wed']
values = ['coffee', 'milk', 'water']

# 通常の方法
d = {}
for k, v in zip(keys, values):
    d[k] = v

print(d)  # 出力: {'mon': 'coffee', 'tue': 'milk', 'wed': 'water'}
```

辞書内包表記を使うと：
```python
keys = ['mon', 'tue', 'wed']
values = ['coffee', 'milk', 'water']

# 内包表記
d = {k: v for k, v in zip(keys, values)}
print(d)  # 出力: {'mon': 'coffee', 'tue': 'milk', 'wed': 'water'}
```

---

## 応用例

### 1. 二次元リストの内包表記

```python
# 通常の方法
matrix = []
for i in range(3):
    row = []
    for j in range(3):
        row.append(i * j)
    matrix.append(row)

print(matrix)  # 出力: [[0, 0, 0], [0, 1, 2], [0, 2, 4]]
```

内包表記を使うと：
```python
matrix = [[i * j for j in range(3)] for i in range(3)]
print(matrix)  # 出力: [[0, 0, 0], [0, 1, 2], [0, 2, 4]]
```

### 2. 条件付き辞書内包表記

値が特定の条件を満たす場合のみ辞書に追加する：
```python
numbers = [1, 2, 3, 4, 5]

# 内包表記
square_dict = {n: n ** 2 for n in numbers if n % 2 == 0}
print(square_dict)  # 出力: {2: 4, 4: 16}
```

---

## 注意点

1. **可読性を意識する**
   - 内包表記は簡潔に書ける一方で、複雑な処理を詰め込みすぎると可読性が低下します。
   - 必要に応じて通常のループを使用することを検討してください。

2. **ネストが深すぎないように**
   - 入れ子の内包表記は強力ですが、理解しづらくなる可能性があります。

---

## まとめ

- 内包表記は、リストや辞書などのコレクション型データを簡潔に生成するための便利な構文です。
- 条件付きや入れ子構造にも対応しており、幅広い場面で活用可能です。
- ただし、可読性を保つために適切な使い方を心がけましょう。

このドキュメントを参考に、内包表記を効果的に活用してPythonのコーディングスキルを向上させてください！

